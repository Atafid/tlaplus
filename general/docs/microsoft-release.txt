TO PREPARE THE ZIP FILES FOR THE TOOLBOX RELEASE

Notes: 1. To get tlatools.jar file copied to the right place for the distributed version of TLC, 
          after running Ant, run "mvn install" in the directory
      
            C:\lamport\tla\newtools\tla2-inria\org.lamport.tla.toolbox.jnlp
            
       2. If maven doesn't produce a good build, try running `maven clean' before
          running `maven install'
          
       3. The file .../newtools/tla2-inria/pom.xml is not automatically updated
          by SVN inside Eclipse, and must be updated by running 'svn up pom.xml'
          in a Cygwin shell.  Running `svn up' in a Cygwin shell might not be a bad
          idea, because it seems to update some things that Eclipse doesn't.

Step 1: Get the right version numbers to appear:

In org.lamport.tla.toolbox.product.standalone 
  plugin.xml : line 32 (the "aboutText" property), update date and version 
               and other stuff that appears in the Help/About window.  
  standalone.product: 
    As of 24 Jun 2011, standalone.product has moved to:
    org.lamport.tla.toolbox.product.product
     Branding tab: update date and version (This may be used in Help > About.)
     Overview: update version.  (I don't know if this is used anywhere.)


In org.lamport.tla.toolbox/welcome/welcomeView.html
   Update date and version

In toolbox.product.standalone/intro/root.xhtml: 
  update version information.

Step 2: Build the .zip files:
Method 1: 
In org.lamport.tla.toolbox.product.standalone.product
 as of June 2011 this file was renamed to
   org.lamport.tla.toolbox.product.product.product
   
  synchronize and use Eclipse Product export wizard
  In the first menu, give
    Product Configuration: 
      Configuration:
        /org.lamport.tla.toolbox.product.standalone/standalone.product
      Root directory: toolbox
    Synchronization:
      Synchronize before exporting
    Destination:
      Archive file:
        c:\lamport\tla\toolbox-release\toolbox-i.j.k  or
        c:\users\lamport\tla\toolbox-release\toolbox-i.j.k on svc-lamport-4
        
    Export Options
      Export for muliple platforms
      Allow for binary cycles in target platform
  In Cross-platform export menu, select
    linux (gtk/x86 & x86_64)
    macosx (cocoa/x86 & x86_64
    win32 (win32/x86 & x86_64)

 Hitting Finish then puts the zip files into:
     c:\users\lamport\tla\toolbox-release

Method 2. Using Maven
  Set the version number in ...product.product/pom.xml.
  (The target platforms to build for are specified in tla2-inria/pom.xml.  This file also specifies
   what version of the Eclipse libraries to build with.)
  In a Cygwin shell, 
   - cd to ~/tla/newtools/tla2-inria
   - run:  mvn install
  This runs tests, which could fail.
  To not run the tests, instead run
     mvn install -Dmaven.test.skip=true
  To have it do the tests but continue if it fails, run
     mvn install -Dmaven.test.failure.ignore=true
  The .zip files are in
       C:\Users\lamport\.m2\repository\tlatools\org.lamport.tla.toolbox.product.product\version-number
  This will keep accumulating new versions.  To delete an old version, delete the
       C:\Users\lamport\.m2\repository\tlatools\
    directory.
  
TO PREPARE THE STAND-ALONE TLA TOOLS RELEASE ZIP FILE
  Run the Ant default-release option.  This will put the release in
     C:\lamport\tla\newtools\tla2-inria\tlatools\dist\tla.zip

TO GENERATE THE RELEASE:
  Go to  Code Posting Tool - My Requests
    http://msrredtools/tools/publish/cpt_v26/research/list.aspx
  Click on the version:
  Click on Upgrade Installation
     Indicate new version number
  Note: when uploading the file, wait for progress bar at bottom
    of screen to indicate it's done (and for new file name to
    appear in Installation field)

Queries to msrcpx or Chuck Needham (chuckne)
-------------------------------------------------------------
Version 1.3.2 of ???
    Added the Forget Specification command.
    Includes a first release of the distributed version of TLC.
    Includes fix to SANY to support binary, octal, and hex numbers.
    Includes PlusCal Version 1.6.
    Added default overriding of definitions like Foo == CHOOSE v : v \notin S.
    Made advanced model page open with definition overriding section opened  
      if there are overrides.
    Fixed TLC bug in overriding instantiated definitions.
    Handles prover's new "reason" message field to display timeout as reason
      for prover failure. 
Version 1.3.1 of 5 April 2011
    Includes PlusCal Version 1.5, which adds fairness and improved translation.
    Contains a number of minor bug fixes.
Version 1.2.1 of 2 October 2010
    Added a sophisticated interface for running the TLAPS proof checker.
    Added a command for displaying all globally defined symbols.
    Added commands for displaying all uses of a symbol.
    The Goto Declaration command now works for locally defined symbols.
    Added commands for formatting boxed comments.
    Made some additional minor changes.
 Version 1.1.2 - 6 May 2010
    Added trace Explorer, which evaluates expressions on an error trace.
    Added folding of proofs to permit reading them hierarchically.
    Added TLA Proof Manager menu item that currently does nothing. 
 Version 1.1.1 - 22 Mar 2010 : 
    Fixes TLC bug that made restarting from a checkpoint not work,
    plus minor fixes.
 Version 1.1.0 -  5 Feb 2010 : 
    initial release

 