<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.debug.ui.category.run"
            defaultHandler="org.lamport.tla.toolbox.tool.prover.ui.handler.CheckProofHandler"
            description="Checks the proof step containing the caret in the active editor or the entire module if the caret is not at a step"
            id="org.lamport.tla.toolbox.tool.prover.ui.checkStep.delegate"
            name="Prove Step or Module">
      </command>
      <command
            categoryId="org.eclipse.debug.ui.category.run"
            defaultHandler="org.lamport.tla.toolbox.tool.prover.ui.handler.StatusStepHandler"
            description="Gets the status of the proof step (and sub-steps) containing the caret in the active editor or the entire module if the caret is not at a step"
            id="org.lamport.tla.toolbox.tool.prover.ui.statusStep"
            name="Check Status of Step or Module">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:#TextEditorContext?after=foldCommands">
         <command
               commandId="org.lamport.tla.toolbox.tool.prover.ui.checkStep.delegate"
               style="push">
         </command>
         <command
               commandId="org.lamport.tla.toolbox.tool.prover.ui.statusStep"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:org.eclipse.ui.main.menu?after=toolbox.tools.separator">
         <menu
               id="toolbox.toolmenus.tlapm"
               label="TLA Proof Manager"
               mnemonic="M"
               tooltip="TLA Proof Manager Actions">
            <command
                  commandId="toolbox.command.openview"
                  label="TLAPM Console"
                  style="push">
               <parameter
                     name="toolbox.openview.name"
                     value="org.eclipse.ui.console.ConsoleView">
               </parameter>
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="activeWorkbenchWindow.activePerspective">
                     <not>
                        <equals
                              value="org.lamport.tla.toolbox.ui.perspective.initial">
                        </equals>
                     </not>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="toolbox.command.openview"
                  label="Interesting Obligations"
                  style="push">
               <parameter
                     name="toolbox.openview.name"
                     value="org.lamport.tla.toolbox.tool.prover.ui.rejectedObligations">
               </parameter>
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="activeWorkbenchWindow.activePerspective">
                     <not>
                        <equals
                              value="org.lamport.tla.toolbox.ui.perspective.initial">
                        </equals>
                     </not>
                  </with>
               </visibleWhen>
            </command>
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.console.consoleFactories">
      <consoleFactory
            class="org.lamport.tla.toolbox.tool.prover.ui.TLAPMConsoleFactory"
            label="TLAPM Console">
      </consoleFactory>
   </extension>
   <extension
         id="org.lamport.tla.toolbox.tool.prover.ui.stepChecked"
         name="Step checked"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.lamport.tla.toolbox.tool.prover.ui.proofStepStatus">
      </super>
      <persistent
            value="true">
      </persistent>
   </extension>
   <extension
         id="org.lamport.tla.toolbox.tool.prover.ui.stepOmitted"
         name="Step omitted"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.lamport.tla.toolbox.tool.prover.ui.proofStepStatus">
      </super>
      <persistent
            value="true">
      </persistent>
   </extension>
   <extension
         id="org.lamport.tla.toolbox.tool.prover.ui.stepMissing"
         name="All written proofs are checked for a step"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.lamport.tla.toolbox.tool.prover.ui.proofStepStatus">
      </super>
      <persistent
            value="true">
      </persistent>
   </extension>
   <extension
         id="org.lamport.tla.toolbox.tool.prover.ui.stepProvingFailed"
         name="Step proving failed"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.lamport.tla.toolbox.tool.prover.ui.proofStepStatus">
      </super>
      <persistent
            value="true">
      </persistent>
   </extension>
   <extension
         id="org.lamport.tla.toolbox.tool.prover.ui.stepCheckingFailed"
         name="Step checking failed"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.lamport.tla.toolbox.tool.prover.ui.proofStepStatus">
      </super>
      <persistent
            value="true">
      </persistent>
   </extension>
   <extension
         id="org.lamport.tla.toolbox.tool.prover.ui.stepProved"
         name="Step proved"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.lamport.tla.toolbox.tool.prover.ui.proofStepStatus">
      </super>
      <persistent
            value="true">
      </persistent>
   </extension>
   <extension
         id="org.lamport.tla.toolbox.tool.prover.ui.stepBeingProved"
         name="Step Being Proved"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.lamport.tla.toolbox.tool.prover.ui.proofStepStatus">
      </super>
      <persistent
            value="true">
      </persistent>
   </extension>
   <extension
         id="org.lamport.tla.toolbox.tool.prover.ui.leafFailed"
         name="Failed Leaf Step"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.lamport.tla.toolbox.tool.prover.ui.proofStepStatus">
      </super>
      <persistent
            value="true">
      </persistent>
   </extension>
   <extension
         id="org.lamport.tla.toolbox.tool.prover.ui.proofStepStatus"
         name="Super type representing the status of a proof step"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.eclipse.core.resources.marker">
      </super>
   </extension>
   <extension
         point="org.eclipse.ui.editors.annotationTypes">
      <type
            markerType="org.lamport.tla.toolbox.tool.prover.ui.stepChecked"
            name="org.lamport.tla.toolbox.tool.prover.ui.stepChecked">
      </type>
      <type
            markerType="org.lamport.tla.toolbox.tool.prover.ui.stepOmitted"
            name="org.lamport.tla.toolbox.tool.prover.ui.stepOmitted">
      </type>
      <type
            markerType="org.lamport.tla.toolbox.tool.prover.ui.stepMissing"
            name="org.lamport.tla.toolbox.tool.prover.ui.stepMissing">
      </type>
      <type
            markerType="org.lamport.tla.toolbox.tool.prover.ui.stepProvingFailed"
            name="org.lamport.tla.toolbox.tool.prover.ui.stepProvingFailed">
      </type>
      <type
            markerType="org.lamport.tla.toolbox.tool.prover.ui.stepCheckingFailed"
            name="org.lamport.tla.toolbox.tool.prover.ui.stepCheckingFailed">
      </type>
      <type
            markerType="org.lamport.tla.toolbox.tool.prover.ui.stepProved"
            name="org.lamport.tla.toolbox.tool.prover.ui.stepProved">
      </type>
      <type
            markerType="org.lamport.tla.toolbox.tool.prover.ui.stepBeingProved"
            name="org.lamport.tla.toolbox.tool.prover.ui.stepBeingProved">
      </type>
      <type
            markerType="org.lamport.tla.toolbox.tool.prover.ui.leafFailed"
            name="org.lamport.tla.toolbox.tool.prover.ui.leafFailed">
      </type>
   </extension>
   <extension
         point="org.eclipse.ui.editors.markerAnnotationSpecification">
      <specification
            annotationType="org.lamport.tla.toolbox.tool.prover.ui.stepChecked"
            colorPreferenceKey="fcsCPK"
            colorPreferenceValue="113,255,113"
            highlightPreferenceKey="fcsHPK"
            highlightPreferenceValue="true"
            includeOnPreferencePage="true"
            label="Step Checked"
            overviewRulerPreferenceKey="fcsORPK"
            textPreferenceKey="fcsTPK"
            textPreferenceValue="true"
            textStylePreferenceKey="fcsSPK"
            textStylePreferenceValue="BOX">
      </specification>
      <specification
            annotationType="org.lamport.tla.toolbox.tool.prover.ui.stepOmitted"
            colorPreferenceKey="steoCPK"
            colorPreferenceValue="217,250,174"
            highlightPreferenceKey="steoHPK"
            highlightPreferenceValue="true"
            includeOnPreferencePage="true"
            label="Step Omitted"
            overviewRulerPreferenceKey="steoORPK"
            textPreferenceKey="steoTPK"
            textPreferenceValue="true"
            textStylePreferenceKey="steoSPK"
            textStylePreferenceValue="BOX">
      </specification>
      <specification
            annotationType="org.lamport.tla.toolbox.tool.prover.ui.stepMissing"
            colorPreferenceKey="wpcCPK"
            colorPreferenceValue="255,255,183"
            highlightPreferenceKey="wpcHPK"
            highlightPreferenceValue="true"
            includeOnPreferencePage="true"
            label="Step Missing"
            overviewRulerPreferenceKey="wpcORPK"
            textPreferenceKey="wpcTPK"
            textPreferenceValue="true"
            textStylePreferenceKey="wpcSPK"
            textStylePreferenceValue="BOX">
      </specification>
      <specification
            annotationType="org.lamport.tla.toolbox.tool.prover.ui.stepProvingFailed"
            colorPreferenceKey="offsCPK"
            colorPreferenceValue="255,187,187"
            highlightPreferenceKey="offsHPK"
            highlightPreferenceValue="true"
            includeOnPreferencePage="true"
            label="Step Proving Failed"
            overviewRulerPreferenceKey="offsORPK"
            textPreferenceKey="offsTPK"
            textPreferenceValue="true"
            textStylePreferenceKey="offsSPK"
            textStylePreferenceValue="BOX">
      </specification>
      <specification
            annotationType="org.lamport.tla.toolbox.tool.prover.ui.stepCheckingFailed"
            colorPreferenceKey="scfCPK"
            colorPreferenceValue="255,128,128"
            highlightPreferenceKey="scfHPK"
            highlightPreferenceValue="true"
            includeOnPreferencePage="true"
            label="Step Checking Failed"
            overviewRulerPreferenceKey="scfORPK"
            textPreferenceKey="scfTPK"
            textPreferenceValue="true"
            textStylePreferenceKey="scfSPK"
            textStylePreferenceValue="BOX">
      </specification>
      <specification
            annotationType="org.lamport.tla.toolbox.tool.prover.ui.stepProved"
            colorPreferenceKey="spCPK"
            colorPreferenceValue="174,255,174"
            highlightPreferenceKey="spHPK"
            highlightPreferenceValue="true"
            includeOnPreferencePage="true"
            label="Step Proved"
            overviewRulerPreferenceKey="spORPK"
            textPreferenceKey="spTPK"
            textPreferenceValue="true"
            textStylePreferenceKey="spSPK"
            textStylePreferenceValue="BOX">
      </specification>
      <specification
            annotationType="org.lamport.tla.toolbox.tool.prover.ui.stepBeingProved"
            colorPreferenceKey="sbpCPK"
            colorPreferenceValue="133,133,133"
            highlightPreferenceKey="sbpHPK"
            highlightPreferenceValue="true"
            includeOnPreferencePage="true"
            label="Step Being Proved"
            overviewRulerPreferenceKey="sbpORPK"
            textPreferenceKey="sbpTPK"
            textPreferenceValue="true"
            textStylePreferenceKey="sbpTSPK"
            textStylePreferenceValue="BOX">
      </specification>
      <specification
            annotationType="org.lamport.tla.toolbox.tool.prover.ui.leafFailed"
            colorPreferenceKey="lspfCPK"
            colorPreferenceValue="255,187,187"
            contributesToHeader="false"
            highlightPreferenceKey="lspfHPK"
            highlightPreferenceValue="true"
            includeOnPreferencePage="true"
            label="Leaf Step Proving Failed"
            overviewRulerPreferenceKey="lspfORPK"
            overviewRulerPreferenceValue="true"
            textPreferenceKey="lspfTPK"
            textPreferenceValue="true"
            textStylePreferenceKey="lspfSPK"
            textStylePreferenceValue="BOX">
      </specification>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <view
            class="org.lamport.tla.toolbox.tool.prover.ui.view.ObligationsView"
            id="org.lamport.tla.toolbox.tool.prover.ui.rejectedObligations"
            name="Interesting Obligations"
            restorable="true">
      </view>
   </extension>
   <extension
         point="org.lamport.tla.toolbox.spec">
      <participant
            class="org.lamport.tla.toolbox.tool.prover.ui.util.ProverSpecLifecycleParticipant">
      </participant>
   </extension>
   <extension
         id="org.lamport.tla.toolbox.tool.prover.obligation"
         name="Obligation information"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.eclipse.core.resources.marker">
      </super>
      <attribute
            name="org.lamport.tla.toolbox.tool.prover.obId">
      </attribute>
      <attribute
            name="org.lamport.tla.toolbox.tool.prover.obStatus">
      </attribute>
      <attribute
            name="org.lamport.tla.toolbox.tool.prover.obMethod">
      </attribute>
      <attribute
            name="org.lamport.tla.toolbox.tool.prover.obString">
      </attribute>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.lamport.tla.toolbox.tool.prover.ui.checkStep.delegate"
            contextId="org.eclipse.ui.textEditorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+G M1+G">
      </key>
      <key
            commandId="org.lamport.tla.toolbox.tool.prover.ui.statusStep"
            contextId="org.eclipse.ui.textEditorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+G M1+T">
      </key>
   </extension>
   <extension
         point="org.lamport.tla.toolbox.tool">
      <participant
            class="org.lamport.tla.toolbox.tool.prover.ProverToolboxLifecycleParticipant">
      </participant>
   </extension>
   <extension
         id="org.lamport.tla.toolbox.tool.prover.ui.sanyMarker"
         name="SANY Step Location Marker"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.eclipse.core.resources.marker">
      </super>
      <attribute
            name="org.lamport.tla.toolbox.tool.prover.ui.sanyLoc">
      </attribute>
      <attribute
            name="org.lamport.tla.toolbox.tool.prover.ui.isLeafStep">
      </attribute>
   </extension>

</plugin>
