<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            id="org.lamport.tla.toolbox.editor.basic.TLAEditor"
            name="TLA+ Basic Editor"
            extensions="tla"
            icon="icons/tla_obj.gif"
            contributorClass="org.lamport.tla.toolbox.editor.basic.TLAEditorActionContributor"
            class="org.lamport.tla.toolbox.editor.basic.TLAEditor">
      </editor>
      <editor
            class="org.lamport.tla.toolbox.editor.basic.TLAEditorAndPDFViewer"
            contributorClass="org.lamport.tla.toolbox.editor.basic.TLAMultiPageEditorActionBarContributor"
            default="false"
            extensions="pdf, tla"
            id="org.lamport.tla.toolbox.editor.basic.TLAEditorAndPDFViewer"
            name="TLA Editor And PDF Viewer">
      </editor>
   </extension>
 <extension
       id="org.lamport.tla.toolbox.editor.basic.DocumentSetup"
       name="org.lamport.tla.toolbox.editor.basic.DocumentSetup"
       point="org.eclipse.core.filebuffers.documentSetup">
    <participant
          class="org.lamport.tla.toolbox.editor.basic.TLADocumentSetupParticipant"
          extensions="tla"/>
 </extension>
    
   <extension
         point="org.eclipse.help.contexts">
      <contexts
            file="helpContexts.xml"
            plugin="org.lamport.tla.toolbox.editor.basic">
      </contexts>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            description="Opens the declaration for the currently selected cross reference"
            id="org.lamport.tla.toolbox.tla.editor.hyperlinking.OpenDeclaration"
            name="Open Declaration">
      </command>
      <command
            description="Toggles the comment at current position"
            id="org.lamport.tla.toolbox.editor.basic.ToggleCommentAction"
            name="Toggle Comment">
      </command>
      <command
            description="Format text"
            id="org.lamport.tla.toolbox.editor.basic.Format"
            name="Format">
      </command>
      <command
            categoryId="org.eclipse.ui.category.textEditor"
            description="Example of editor command"
            id="org.lamport.tla.toolbox.editor.basic.TestEditorCommand"
            name="Test Editor Command">
      </command>
      <command
            categoryId="org.eclipse.ui.category.textEditor"
            description="Shows all usable steps and their siblings, and shows immediate children, hides all others"
            id="org.lamport.tla.toolbox.editor.basic.FoldUnusableSteps"
            name="Focus On Step">
      </command>
      <command
            categoryId="org.eclipse.ui.category.textEditor"
            description="Hides all proofs in module"
            id="org.lamport.tla.toolbox.editor.basic.FoldAllProofs"
            name="Hise All Proofs">
      </command>
      <command
            categoryId="org.eclipse.ui.category.textEditor"
            description="Shows all proofs in the module"
            id="org.lamport.tla.toolbox.editor.basic.ExpandAllProofs"
            name="Show All Proofs">
      </command>
      <command
            categoryId="org.eclipse.ui.category.textEditor"
            description="Shows the subtree containing the caret."
            id="org.lamport.tla.toolbox.editor.basic.ExpandSubtree"
            name="Show Current Subtree">
      </command>
      <command
            categoryId="org.eclipse.ui.category.textEditor"
            description="Hides the subtree containing the caret."
            id="org.lamport.tla.toolbox.editor.basic.CollapseSubtree"
            name="Hide Current Subtree">
      </command>
      <command
            categoryId="org.eclipse.ui.category.textEditor"
            description="Shows the proof of the step containing the caret and collapses all subproofs."
            id="org.lamport.tla.toolbox.editor.basic.ShowImmediate"
            name="Show Children Only">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.lamport.tla.toolbox.editor.basic.TLAEditor$OpenDeclarationHandler"
            commandId="org.lamport.tla.toolbox.tla.editor.hyperlinking.OpenDeclaration">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.lamport.tla.toolbox.tla.editor.hyperlinking.OpenDeclaration"
            contextId="org.eclipse.ui.textEditorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="F3"/>
      <key 
            commandId="org.lamport.tla.toolbox.editor.basic.ToggleCommentAction"
            contextId="org.eclipse.ui.textEditorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+/" />
      <key
            commandId="org.lamport.tla.toolbox.editor.basic.TestEditorCommand"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+5">
      </key>
      <key
            commandId="org.lamport.tla.toolbox.editor.basic.FoldUnusableSteps"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+1">
      </key>
      <key
            commandId="org.lamport.tla.toolbox.editor.basic.FoldAllProofs"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+2">
      </key>
      <key
            commandId="org.lamport.tla.toolbox.editor.basic.ExpandAllProofs"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+3">
      </key>
      <key
            commandId="org.lamport.tla.toolbox.editor.basic.ExpandSubtree"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+8">
      </key>
      <key
            commandId="org.lamport.tla.toolbox.editor.basic.CollapseSubtree"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+6">
      </key>
      <key
            commandId="org.lamport.tla.toolbox.editor.basic.ShowImmediate"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+7">
      </key>
      
   </extension>
   <extension
         point="org.eclipse.ui.menus">
         		<menuContribution locationURI="popup:#TextEditorContext?after=group.open">
			<command commandId="org.lamport.tla.toolbox.tla.editor.hyperlinking.OpenDeclaration">
			</command>
		</menuContribution>
           <menuContribution
                 locationURI="popup:#TextEditorContext?after=additions">
              <command
                    commandId="org.lamport.tla.toolbox.editor.basic.ToggleCommentAction">
              </command>
              <command
                    commandId="org.lamport.tla.toolbox.editor.basic.Format">
              </command>
              <command
                    commandId="org.eclipse.ui.edit.text.contentAssist.proposals">
              </command>
              <command
                    commandId="org.eclipse.ui.edit.text.contentAssist.contextInformation">
              </command>
              <menu
                    id="org.lamport.tla.toolbox.editor.basic.ProofFoldCommands"
                    label="Proof Folding">
                 <command
                       commandId="org.lamport.tla.toolbox.editor.basic.ExpandAllProofs"
                       style="push">
                 </command>
                 <command
                       commandId="org.lamport.tla.toolbox.editor.basic.FoldAllProofs"
                       style="push">
                 </command>
                 <command
                       commandId="org.lamport.tla.toolbox.editor.basic.ExpandSubtree"
                       style="push">
                 </command>
                 <command
                       commandId="org.lamport.tla.toolbox.editor.basic.CollapseSubtree"
                       style="push">
                 </command>
                 <command
                       commandId="org.lamport.tla.toolbox.editor.basic.ShowImmediate"
                       style="push">
                 </command>
                 <command
                       commandId="org.lamport.tla.toolbox.editor.basic.FoldUnusableSteps"
                       style="push">
                 </command>
              </menu>
           </menuContribution>
         
   </extension>
   <extension
         point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectorTargets">
      <target
            id="org.lamport.tla.tlaCode"
            name="TLA+ Editor">
         <context
               type="org.lamport.tla.toolbox.editor.basic.TLAEditor">
         </context>
      </target>
   </extension>
   <extension
         point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectors">
      <hyperlinkDetector
            activate="true"
            class="org.lamport.tla.toolbox.editor.basic.tla.TLAHyperlinkDetector"
            id="toolbox.editor.basic.hyperlinkDetector.tla"
            name="TLA+ Hyperlink detector"
            targetId="org.eclipse.ui.DefaultTextEditor">
      </hyperlinkDetector>
   </extension>
</plugin>
